@use '../mixins/breakpoints' as bp;

// ========================================================================== //
//                          MIXIN: UTILITIES - TEXT                           //
// ========================================================================== //

// --------------------------------------------------------------------------
// SECTION: TEXT OVERFLOW & WRAPPING
// --------------------------------------------------------------------------

/// Prevents text overflow by allowing word breaking and wrapping
/// Use for long text content that should wrap naturally
@mixin text-wrap {
    overflow-wrap: break-word;
    word-wrap: break-word; // Fallback for older browsers
    word-break: break-word;
    hyphens: auto;
}

/// Prevents aggressive word breaking (use normal breaking rules)
/// Better for most scenarios where you want controlled wrapping
@mixin text-wrap-normal {
    overflow-wrap: break-word;
    word-wrap: break-word;
    word-break: normal;
    hyphens: auto;
}

/// Prevents any text wrapping (keeps text on single line)
@mixin text-nowrap {
    white-space: nowrap;
}

// --------------------------------------------------------------------------
// SECTION: TEXT TRUNCATION
// --------------------------------------------------------------------------

/// Truncates text with ellipsis on a single line
/// @param {String} $max-width - Optional max-width constraint
@mixin text-ellipsis($max-width: null) {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    
    @if $max-width {
        max-width: $max-width;
    }
}

/// Truncates text with ellipsis after specified number of lines
/// Uses modern line-clamp with fallback
/// @param {Number} $lines - Number of lines before truncation (default: 2)
@mixin text-clamp($lines: 2) {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: $lines;
    overflow: hidden;
    text-overflow: ellipsis;
    word-break: break-word;
}

// --------------------------------------------------------------------------
// SECTION: OVERFLOW PREVENTION
// --------------------------------------------------------------------------

/// Comprehensive overflow prevention for containers
@mixin prevent-overflow {
    min-width: 0; // Critical for flexbox children
    max-width: 100%;
    overflow: hidden;
    overflow-wrap: break-word;
    word-wrap: break-word;
}

/// Creates a safe text container that handles overflow gracefully
/// @param {String} $max-width - Optional max-width (default: 100%)
@mixin text-container($max-width: 100%) {
    max-width: $max-width;
    min-width: 0;
    overflow-wrap: break-word;
    word-wrap: break-word;
    word-break: break-word;
    hyphens: auto;
}

// --------------------------------------------------------------------------
// SECTION: TEXT SELECTION
// --------------------------------------------------------------------------

/// Customizes text selection appearance
/// @param {Color} $background - Selection background color
/// @param {Color} $color - Selection text color
@mixin text-selection($background, $color: null) {
    ::selection {
        background: $background;
        @if $color {
            color: $color;
        }
    }
    
    ::-moz-selection {
        background: $background;
        @if $color {
            color: $color;
        }
    }
}

/// Disables text selection
@mixin text-no-select {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

// --------------------------------------------------------------------------
// SECTION: TEXT ALIGNMENT HELPERS
// --------------------------------------------------------------------------

/// Responsive text alignment
/// @param {String} $alignment - Text alignment (left, center, right, justify)
/// @param {String} $breakpoint - Optional breakpoint for responsive alignment
@mixin text-align($alignment, $breakpoint: null) {
    @if $breakpoint {
        @include bp.bp-up($breakpoint) {
            text-align: $alignment;
        }
    } @else {
        text-align: $alignment;
    }
}

// --------------------------------------------------------------------------
// SECTION: TEXT DECORATION HELPERS
// --------------------------------------------------------------------------

/// Remove text decoration with state variants
/// @param {Boolean} $all-states - Apply to all link states (default: true)
@mixin text-no-decoration($all-states: true) {
    text-decoration: none;
    
    @if $all-states {
        &:hover,
        &:focus,
        &:active {
            text-decoration: none;
        }
    }
}

/// Add underline with customization
/// @param {Color} $color - Underline color (default: currentColor)
/// @param {String} $style - Underline style (solid, dotted, dashed, wavy)
/// @param {String} $thickness - Underline thickness
@mixin text-underline($color: currentColor, $style: solid, $thickness: 1px) {
    text-decoration: underline;
    text-decoration-color: $color;
    text-decoration-style: $style;
    text-decoration-thickness: $thickness;
}
