@use '../abstracts/mixins/foundation/typography' as typography;
@use '../abstracts' as *;

// ============================================================================ //
//                    TREE SELECT & ACCORDION SELECT COMPONENTS                  //
// ============================================================================ //

// ---------------------------------------------------------------------------//
// TREE SELECT
// ---------------------------------------------------------------------------//

.tree-select {
    width: 100%;
}

.tree-select__search {
    margin-bottom: var(--spacing-3);
}

.tree-select__list {
    max-height: 400px;
    overflow-y: auto;
    border: var(--border-width-1) solid var(--color-border-default);
    border-radius: var(--border-radius-m);
    background: var(--color-surface-default);
}

.tree-select__empty {
    padding: var(--spacing-6);
    text-align: center;
    color: var(--color-on-surface-subtle);
    @include typography.typography-responsive('body', 's', 'regular');
}

.tree-select__node {
    border-bottom: var(--border-width-1) solid var(--color-border-subtle);

    &:last-child {
        border-bottom: none;
    }
}

.tree-select__parent {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-3) var(--spacing-3);
    background: var(--color-surface-subtle);

    &:hover {
        background: var(--color-neutral-100);
    }
}

.tree-select__expand {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--scale-6);
    height: var(--scale-6);
    padding: 0;
    background: none;
    border: none;
    border-radius: var(--border-radius-s);
    color: var(--color-on-surface-subtle);
    cursor: pointer;
    transition: all var(--duration-fast) var(--easing-standard);

    &:hover {
        background: var(--color-surface-moderate);
        color: var(--color-on-surface-default);
    }
}

.tree-select__checkbox {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--scale-5);
    height: var(--scale-5);
    flex-shrink: 0;
    padding: 0;
    background: var(--color-surface-default);
    border: var(--border-width-xs) solid var(--color-border-default);
    border-radius: var(--border-radius-s);
    color: var(--color-neutral-0);
    cursor: pointer;
    transition: all var(--duration-fast) var(--easing-standard);

    &:hover {
        border-color: var(--color-primary);
    }

    &--checked {
        background: var(--color-primary);
        border-color: var(--color-primary);
    }

    &--partial {
        background: var(--color-primary-2);
        border-color: var(--color-primary);
    }
}

.tree-select__partial-indicator {
    width: 8px;
    height: 2px;
    background: var(--color-primary);
    border-radius: var(--border-radius-xs);
}

.tree-select__label {
    flex: 1;
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    @include typography.typography-responsive('body', 's', 'medium');
    color: var(--color-on-surface-default);
    cursor: pointer;
}

.tree-select__icon {
    display: flex;
    color: var(--color-on-surface-subtle);
}

.tree-select__count {
    @include typography.typography-responsive('caption', 'm', 'regular');
    color: var(--color-on-surface-subtle);
    margin-left: var(--spacing-1);
}

.tree-select__children {
    padding-left: var(--spacing-8);
    background: var(--color-surface-default);
}

.tree-select__child {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2) var(--spacing-3);
    border-top: var(--border-width-1) solid var(--color-border-subtle);

    &:hover {
        background: var(--color-neutral-50);
    }

    .tree-select__label {
        @include typography.typography-responsive('body', 's', 'regular');
    }
}

// ---------------------------------------------------------------------------//
// ACCORDION SELECT
// ---------------------------------------------------------------------------//

.accordion-select {
    width: 100%;
}

.accordion-select__search {
    margin-bottom: var(--spacing-3);
}

.accordion-select__sections {
    border: var(--border-width-1) solid var(--color-border-default);
    border-radius: var(--border-radius-m);
    overflow: hidden;
}

.accordion-select__empty {
    padding: var(--spacing-6);
    text-align: center;
    color: var(--color-on-surface-subtle);
    @include typography.typography-responsive('body', 's', 'regular');
}

.accordion-select__section {
    border-bottom: var(--border-width-1) solid var(--color-border-default);

    &:last-child {
        border-bottom: none;
    }
}

.accordion-select__header {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2) var(--spacing-3);
    background: var(--color-surface-subtle);
}

.accordion-select__checkbox {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--scale-5);
    height: var(--scale-5);
    flex-shrink: 0;
    padding: 0;
    background: var(--color-surface-default);
    border: var(--border-width-xs) solid var(--color-border-default);
    border-radius: var(--border-radius-s);
    color: var(--color-neutral-0);
    cursor: pointer;
    transition: all var(--duration-fast) var(--easing-standard);

    &:hover {
        border-color: var(--color-primary);
    }

    &--checked {
        background: var(--color-primary);
        border-color: var(--color-primary);
    }

    &--partial {
        background: var(--color-primary-2);
        border-color: var(--color-primary);
    }
}

.accordion-select__partial {
    width: 8px;
    height: 2px;
    background: var(--color-primary);
    border-radius: var(--border-radius-xs);
}

.accordion-select__trigger {
    flex: 1;
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2);
    background: none;
    border: none;
    cursor: pointer;
    text-align: left;

    &:hover {
        background: var(--color-neutral-100);
        border-radius: var(--border-radius-s);
    }
}

.accordion-select__title {
    flex: 1;
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    @include typography.typography-responsive('body', 's', 'medium');
    color: var(--color-on-surface-default);
}

.accordion-select__icon {
    display: flex;
    color: var(--color-on-surface-subtle);
}

.accordion-select__count {
    @include typography.typography-responsive('caption', 'm', 'medium');
    color: var(--color-on-surface-subtle);
    background: var(--color-surface-moderate);
    padding: var(--spacing-1) var(--spacing-2);
    border-radius: var(--border-radius-s);
}

.accordion-select__chevron {
    color: var(--color-on-surface-subtle);
    transition: transform var(--duration-fast) var(--easing-standard);

    &--open {
        transform: rotate(180deg);
    }
}

.accordion-select__content {
    background: var(--color-surface-default);
    padding: var(--spacing-2) var(--spacing-3);
    padding-left: calc(var(--spacing-3) + var(--scale-5) + var(--spacing-2));
}

.accordion-select__item {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2);
    border-radius: var(--border-radius-s);

    &:hover {
        background: var(--color-neutral-50);
    }
}

.accordion-select__item-label {
    @include typography.typography-responsive('body', 's', 'regular');
    color: var(--color-on-surface-default);
}

// ---------------------------------------------------------------------------//
// TREE DROPDOWN
// ---------------------------------------------------------------------------//

.tree-dropdown {
    min-width: 320px;
}

.tree-dropdown__search {
    padding: var(--spacing-2);
    border-bottom: var(--border-width-1) solid var(--color-border-default);

    .input.input--md {
        padding: var(--scale-1) var(--scale-6);

        &.input--has-left-icon {
            padding-left: var(--scale-10);
        }
    }
}

.tree-dropdown__clear {
    background: none;
    border: none;
    padding: var(--spacing-1);
    cursor: pointer;
    color: var(--color-on-surface-subtle);
    display: flex;
    align-items: center;

    &:hover {
        color: var(--color-on-surface-default);
    }
}

.tree-dropdown__list {
    overflow-y: auto;
    overflow-x: hidden;
}

.tree-dropdown__empty {
    padding: var(--spacing-4);
    text-align: center;
    color: var(--color-on-surface-subtle);
    @include typography.typography-responsive('body', 's', 'regular');
}

.tree-dropdown__node {
    // Container for parent + children
}

.tree-dropdown__parent {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2) var(--spacing-3);
    background: var(--color-surface-subtle);

    &:hover {
        background: var(--color-neutral-100);
    }
}

.tree-dropdown__expand {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--scale-5);
    height: var(--scale-5);
    padding: 0;
    background: none;
    border: none;
    border-radius: var(--border-radius-s);
    color: var(--color-on-surface-subtle);
    cursor: pointer;

    &:hover {
        background: var(--color-surface-moderate);
    }
}

.tree-dropdown__checkbox {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--scale-4);
    height: var(--scale-4);
    flex-shrink: 0;
    padding: 0;
    background: var(--color-surface-default);
    border: var(--border-width-xs) solid var(--color-border-default);
    border-radius: var(--border-radius-xs);
    color: var(--color-neutral-0);
    cursor: pointer;
    transition: all var(--duration-fast) var(--easing-standard);

    &:hover {
        border-color: var(--color-primary);
    }

    &--checked {
        background: var(--color-primary);
        border-color: var(--color-primary);
    }

    &--partial {
        background: var(--color-primary-2);
        border-color: var(--color-primary);
    }
}

.tree-dropdown__partial {
    width: 6px;
    height: 2px;
    background: var(--color-primary);
    border-radius: var(--border-radius-xs);
}

.tree-dropdown__label {
    flex: 1;
    @include typography.typography-responsive('body', 's', 'regular');
    color: var(--color-on-surface-default);
    cursor: pointer;
}

.tree-dropdown__children {
    padding-left: var(--spacing-6);
    background: var(--color-surface-default);
}

.tree-dropdown__child {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2) var(--spacing-3);

    &:hover {
        background: var(--color-neutral-50);
    }
}

.tree-dropdown__footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-2) var(--spacing-3);
    border-top: var(--border-width-1) solid var(--color-border-default);
    @include typography.typography-responsive('caption', 'm', 'regular');
    color: var(--color-on-surface-subtle);
}

.tree-dropdown__clear-all {
    background: none;
    border: none;
    @include typography.typography-responsive('caption', 'm', 'regular');
    color: var(--color-primary);
    cursor: pointer;
    padding: var(--spacing-1) var(--spacing-2);
    border-radius: var(--border-radius-s);

    &:hover {
        background: var(--color-primary-1);
        text-decoration: underline;
    }
}

// ---------------------------------------------------------------------------//
// COLUMN CHIPS
// ---------------------------------------------------------------------------//

.column-chips {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-3);
}

.column-chips--empty {
    padding: var(--spacing-4);
    background: var(--color-surface-subtle);
    border-radius: var(--border-radius-m);
}

.column-chips__empty {
    @include typography.typography-responsive('body', 's', 'regular');
    color: var(--color-on-surface-subtle);
}

.column-chips__table {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-1);
}

.column-chips__table-header {
    display: flex;
    align-items: center;
}

.column-chips__table-name {
    font-weight: 500;
}

.column-chips__remove {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-left: var(--spacing-1);
    padding: 0;
    background: none;
    border: none;
    cursor: pointer;
    opacity: 0.6;
    transition: opacity var(--duration-fast) var(--easing-standard);

    &:hover {
        opacity: 1;
    }
}

.column-chips__columns {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-1);
    padding-left: var(--spacing-3);
}