// src/assets/scss/components/_dropdown.scss

/* ────────────────────── DROPDOWN COMPONENT ────────────────────── */

.dropdown {
  position: relative;
  display: inline-block;

  // ── STATE: DISABLED ──
  &--disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
  }

  // ── TRIGGER ──
  &__trigger {
    cursor: pointer;
    user-select: none;

    &:focus-visible {
      outline: var(--border-width-2) solid var(--color-primary);
      outline-offset: var(--border-width-1);
      border-radius: var(--border-radius-s);
    }
  }

  // ── MENU ──
  &__menu {
    position: absolute;
    top: calc(100% + var(--scale-2));
    min-width: 200px;
    max-width: 300px;
    background-color: var(--color-surface-default);
    border: var(--border-width-1) solid var(--color-border-default);
    border-radius: var(--border-radius-m);
    box-shadow: var(--shadow-l);
    padding: var(--scale-2) 0;
    z-index: var(--z-index-dropdown, 1000);
    animation: dropdown-enter var(--duration-base) var(--easing-standard);
    overflow: hidden;

    // ── ALIGNMENT VARIANTS ──
    &--left {
      left: 0;
    }

    &--right {
      right: 0;
    }

    &--center {
      left: 50%;
      transform: translateX(-50%);
    }

    // Mobile: Full width, fixed positioning
    @media (max-width: 640px) {
      position: fixed;
      left: var(--scale-2);
      right: var(--scale-2);
      top: auto;
      bottom: var(--scale-2);
      transform: none;
      max-width: none;
      width: calc(100% - var(--scale-4));
      animation: dropdown-slide-up var(--duration-base) var(--easing-standard);
    }
  }

  // ── ITEM ──
  &__item {
    display: flex;
    align-items: center;
    gap: var(--scale-3);
    width: 100%;
    padding: var(--scale-3) var(--scale-4);
    font-size: var(--font-size-body-m);
    font-family: var(--font-family-sans);
    line-height: var(--line-height-body);
    color: var(--color-on-surface-default);
    background: transparent;
    border: none;
    cursor: pointer;
    text-align: left;
    transition: var(--transition-smooth);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover:not(&--disabled) {
      background-color: var(--color-surface-hover);
    }

    &:active:not(&--disabled) {
      background-color: var(--color-surface-pressed);
    }

    &:focus-visible {
      outline: var(--border-width-2) solid var(--color-primary);
      outline-offset: calc(-1 * var(--border-width-2));
      background-color: var(--color-surface-hover);
    }

    // ── STATE: DISABLED ──
    &--disabled {
      opacity: 0.5;
      cursor: not-allowed;
      pointer-events: none;
    }

    // ── STATE: DANGER ──
    &--danger {
      color: var(--color-feedback-error);

      &:hover:not(&--disabled) {
        background-color: var(--color-feedback-error-subtle);
      }
    }

    // Mobile: Larger touch targets
    @media (max-width: 640px) {
      padding: var(--scale-4) var(--scale-5);
      font-size: var(--font-size-body-l);
    }
  }

  &__item-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--icon-size-s);
    height: var(--icon-size-s);
    flex-shrink: 0;
  }

  &__item-text {
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  // ── DIVIDER ──
  &__divider {
    height: var(--border-width-1);
    background-color: var(--color-border-default);
    margin: var(--scale-2) 0;
  }
}

// ── ANIMATIONS ──
@keyframes dropdown-enter {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes dropdown-slide-up {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}