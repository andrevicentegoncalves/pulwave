@use '../abstracts/mixins/foundation/typography' as typography;
@use '../abstracts' as *;

/* ────────────────────── LOCALE SELECTOR COMPONENT ────────────────────── */

.locale-selector {
  display: inline-flex;
  align-items: center;

  /* ────────────────────── TRIGGER BUTTON ────────────────────── */
  &__trigger {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2) var(--spacing-3);
    background: transparent;
    border: var(--border-width-1) solid transparent;
    border-radius: var(--border-radius-m);
    cursor: pointer;
    transition: all var(--duration-fast) var(--easing-standard);
    user-select: none;

    &:hover {
      background: var(--color-surface-hover);
    }

    &:focus-visible {
      outline: var(--border-width-2) solid var(--color-focus-ring);
      outline-offset: var(--border-width-1);
    }

    &:active {
      transform: scale(0.98);
    }

    /* Trigger Variants */
    &--default {
      background: var(--color-surface-default);
      border-color: var(--color-border-default);

      &:hover {
        border-color: var(--color-border-hover);
        background: var(--color-surface-hover);
      }
    }

    &--minimal {
      padding: var(--spacing-1) var(--spacing-2);
      background: transparent;
      border: none;

      &:hover {
        background: var(--color-surface-hover);
      }
    }

    &--button {
      background: var(--color-primary-500);
      color: var(--color-on-primary);
      border-color: var(--color-primary-500);

      &:hover {
        background: var(--color-primary-600);
        border-color: var(--color-primary-600);
      }

      .locale-selector__chevron {
        color: inherit;
      }
    }

    &--icon {
      padding: var(--spacing-2);
      border-radius: var(--border-radius-round);
      background: transparent;
      border: none;

      &:hover {
        background: var(--color-surface-hover);
      }
    }
  }

  &__label {
    @include typography.typography-responsive('body', 's', 'medium');
    color: var(--color-on-surface-default);
    white-space: nowrap;
  }

  &__chevron {
    width: var(--icon-size-xs);
    height: var(--icon-size-xs);
    color: var(--color-on-surface-subtle);
    transition: transform var(--duration-fast) var(--easing-standard);
    flex-shrink: 0;

    .dropdown__trigger[aria-expanded="true"] & {
      transform: rotate(180deg);
    }
  }

  /* ────────────────────── OPTION ITEM ────────────────────── */
  &__option {
    width: 100%;
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2) var(--spacing-3);
    background: none;
    border: none;
    border-radius: var(--border-radius-s);
    @include typography.typography-responsive('body', 's', 'regular');
    color: var(--color-on-surface-default);
    text-align: left;
    cursor: pointer;
    transition: all var(--duration-fast) var(--easing-standard);
    user-select: none;

    &:hover {
      background: var(--color-surface-hover);
    }

    &:focus-visible {
      outline: var(--border-width-2) solid var(--color-focus-ring);
      outline-offset: calc(var(--border-width-1) * -1);
    }

    &:active {
      transform: scale(0.98);
    }

    &--selected {
      background: var(--color-primary-50);
      color: var(--color-primary-700);

      &:hover {
        background: var(--color-primary-100);
      }
    }
  }

  &__option-name {
    flex: 1;
    text-align: left;
  }

  &__check {
    width: var(--icon-size-s);
    height: var(--icon-size-s);
    color: var(--color-primary-500);
    flex-shrink: 0;
  }

  /* ────────────────────── DROPDOWN MENU OVERRIDE ────────────────────── */
  .dropdown__menu {
    min-width: 200px;
    max-width: 280px;
  }
}

/* ────────────────────── VARIANT MODIFIERS ────────────────────── */

.locale-selector--minimal {
  .locale-selector__trigger {
    padding: var(--spacing-1);
  }
}

.locale-selector--icon {
  .locale-selector__trigger {
    padding: var(--spacing-1);
  }
}

/* ────────────────────── RTL SUPPORT ────────────────────── */

[dir="rtl"] {
  .locale-selector {
    &__option {
      text-align: right;
    }

    &__chevron {
      margin-left: 0;
      margin-right: auto;
    }
  }
}

/* ────────────────────── RESPONSIVE ────────────────────── */

@media (max-width: 480px) {
  .locale-selector {
    &__label {
      // Hide label on mobile for compact variant
      .locale-selector--minimal & {
        display: none;
      }
    }

    &__trigger--default {
      padding: var(--spacing-2);
    }
  }
}
