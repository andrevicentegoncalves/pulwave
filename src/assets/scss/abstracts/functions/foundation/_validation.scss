@use 'sass:map';
@use 'sass:meta';
@use '../../variables/foundation/core' as core;
@use '../../variables/foundation/typography-scale' as typography-vars;
@use '../../variables/foundation/timing-scale' as timing-vars;
@use '../../variables/foundation/border-scale' as border-vars;
@use '../../variables/foundation/radius-scale' as radius-vars;
@use '../../variables/foundation/shadow-scale' as shadow-vars;
@use '../../variables/foundation/opacity-scale' as opacity-vars;
@use '../../variables/foundation/icon-scale' as icon-vars;
@use '../../variables/foundation/z-index-scale' as zindex-vars;
@use '../../variables/foundation/motion-scale' as motion-vars;
@use '../../variables/foundation/focus-scale' as focus-vars;
@use '../../variables/foundation/container-scale' as container-vars;
@use '../../variables/foundation/blur-scale' as blur-vars;
@use '../../variables/foundation/cursor-scale' as cursor-vars;
@use '../../variables/foundation/gradient-scale' as gradient-vars;
@use '../../variables/foundation/transform-scale' as transform-vars;
@use '../../variables/foundation/breakpoints-scale' as breakpoints-vars;
@use '../../variables/foundation/grid-scale' as grid-vars;
@use '../../variables/foundation/aspect-ratio-scale' as aspect-vars;

// ============================================================================ //
//                    FUNCTIONS: FOUNDATION - VALIDATION                        //
// ============================================================================ //
// Universal validation functions to check if variables exist across all scales
// Prevents errors and allows for graceful fallbacks in component code
// ============================================================================ //

// -------------------------------------------
// UNIFIED SCALE VALIDATION
// -------------------------------------------

/// Check if unified scale value exists
/// @param {String|Number} $key - Scale key to check
/// @return {Boolean} True if key exists
/// @example scale-exists(4) => true
/// @example scale-exists(0.5) => true
/// @example scale-exists(999) => false
@function scale-exists($key) {
  @return map.has-key(core.$scale, $key);
}

// -------------------------------------------
// LEGACY ALIASES (Backwards Compatibility)
// -------------------------------------------

/// @deprecated Use scale-exists() instead
/// Check if spacing scale value exists
@function spacing-exists($key) {
  @return scale-exists($key);
}

/// @deprecated Use scale-exists() instead
/// Check if sizing scale value exists
@function sizing-exists($key) {
  @return scale-exists($key);
}

// -------------------------------------------
// TYPOGRAPHY VALIDATION
// -------------------------------------------

/// Check if font size exists
/// @param {String} $key - Size key to check
/// @return {Boolean} True if key exists
@function font-size-exists($key) {
  @return map.has-key(typography-vars.$font-size-desktop, $key);
}

/// Check if font weight exists
/// @param {String|Number} $key - Weight key to check
/// @return {Boolean} True if key exists
@function font-weight-exists($key) {
  @return map.has-key(typography-vars.$font-weight-scale, $key);
}

/// Check if line height exists
/// @param {String} $key - Line height key to check
/// @return {Boolean} True if key exists
@function line-height-exists($key) {
  @return map.has-key(typography-vars.$line-height-scale, $key);
}

/// Check if letter spacing exists
/// @param {String} $key - Letter spacing key to check
/// @return {Boolean} True if key exists
@function letter-spacing-exists($key) {
  @return map.has-key(typography-vars.$letter-spacing-scale, $key);
}

/// Check if font family exists
/// @param {String} $key - Font family key to check
/// @return {Boolean} True if key exists
@function font-family-exists($key) {
  @return map.has-key(typography-vars.$font-family-scale, $key);
}

// -------------------------------------------
// TIMING VALIDATION
// -------------------------------------------

/// Check if duration exists
/// @param {String} $key - Duration key to check
/// @return {Boolean} True if key exists
@function duration-exists($key) {
  @return map.has-key(timing-vars.$duration-scale, $key);
}

/// Check if easing exists
/// @param {String} $key - Easing key to check
/// @return {Boolean} True if key exists
@function easing-exists($key) {
  @return map.has-key(timing-vars.$easing-scale, $key);
}

/// Check if delay exists
/// @param {String} $key - Delay key to check
/// @return {Boolean} True if key exists
@function delay-exists($key) {
  @return map.has-key(timing-vars.$delay-scale, $key);
}

// -------------------------------------------
// BORDER VALIDATION
// -------------------------------------------

/// Check if border width exists
/// @param {String} $key - Border width key to check
/// @return {Boolean} True if key exists
@function border-width-exists($key) {
  @return map.has-key(border-vars.$border-width-scale, $key);
}

/// Check if border style exists
/// @param {String} $key - Border style key to check
/// @return {Boolean} True if key exists
@function border-style-exists($key) {
  @return map.has-key(border-vars.$border-style-options, $key);
}

/// Check if border radius exists
/// @param {String} $key - Radius key to check
/// @return {Boolean} True if key exists
@function radius-exists($key) {
  @return map.has-key(radius-vars.$radius-scale, $key);
}

// -------------------------------------------
// SHADOW VALIDATION
// -------------------------------------------

/// Check if shadow level exists
/// @param {String} $key - Shadow level key to check
/// @return {Boolean} True if key exists
@function shadow-exists($key) {
  @return map.has-key(shadow-vars.$shadow-components, $key);
}

// -------------------------------------------
// OPACITY VALIDATION
// -------------------------------------------

/// Check if opacity level exists
/// @param {String} $key - Opacity key to check
/// @return {Boolean} True if key exists
@function opacity-exists($key) {
  @return map.has-key(opacity-vars.$opacity-scale, $key);
}

// -------------------------------------------
// ICON VALIDATION
// -------------------------------------------

/// Check if icon size exists
/// @param {String} $key - Icon size key to check
/// @return {Boolean} True if key exists
@function icon-size-exists($key) {
  @return map.has-key(icon-vars.$icon-size-scale, $key);
}

// -------------------------------------------
// Z-INDEX VALIDATION
// -------------------------------------------

/// Check if z-index layer exists
/// @param {String} $key - Z-index layer key to check
/// @return {Boolean} True if key exists
@function z-index-exists($key) {
  @return map.has-key(zindex-vars.$z-index-layers, $key);
}

/// Check if component z-index exists
/// @param {String} $key - Component key to check
/// @return {Boolean} True if key exists
@function component-z-index-exists($key) {
  @return map.has-key(zindex-vars.$z-index-components, $key);
}

// -------------------------------------------
// MOTION VALIDATION
// -------------------------------------------

/// Check if motion preset exists
/// @param {String} $key - Motion preset key to check
/// @return {Boolean} True if key exists
@function motion-preset-exists($key) {
  @return map.has-key(motion-vars.$motion-presets, $key);
}

// -------------------------------------------
// FOCUS VALIDATION
// -------------------------------------------

/// Check if focus width exists
/// @param {String} $key - Focus key to check
/// @return {Boolean} True if key exists
@function focus-exists($key) {
  @return map.has-key(focus-vars.$focus-scale, $key);
}

// -------------------------------------------
// CONTAINER VALIDATION
// -------------------------------------------

/// Check if container size exists
/// @param {String} $key - Container size key to check
/// @return {Boolean} True if key exists
@function container-exists($key) {
  @return map.has-key(container-vars.$container-scale, $key);
}

/// Check if container padding exists
/// @param {String} $key - Container padding key to check
/// @return {Boolean} True if key exists
@function container-padding-exists($key) {
  @return map.has-key(container-vars.$container-padding-scale, $key);
}

// -------------------------------------------
// BLUR VALIDATION
// -------------------------------------------

/// Check if blur size exists
/// @param {String} $key - Blur size key to check
/// @return {Boolean} True if key exists
@function blur-exists($key) {
  @return map.has-key(blur-vars.$blur-scale, $key);
}

/// Check if semantic blur exists
/// @param {String} $key - Semantic blur key to check
/// @return {Boolean} True if key exists
@function blur-semantic-exists($key) {
  @return map.has-key(blur-vars.$blur-semantic, $key);
}

/// Check if glassmorphism preset exists
/// @param {String} $key - Preset key to check
/// @return {Boolean} True if key exists
@function glassmorphism-preset-exists($key) {
  @return map.has-key(blur-vars.$glassmorphism-presets, $key);
}

// -------------------------------------------
// CURSOR VALIDATION
// -------------------------------------------

/// Check if cursor type exists
/// @param {String} $key - Cursor type key to check
/// @return {Boolean} True if key exists
@function cursor-exists($key) {
  @return map.has-key(cursor-vars.$cursor-scale, $key);
}

/// Check if semantic cursor exists
/// @param {String} $key - Semantic cursor key to check
/// @return {Boolean} True if key exists
@function cursor-semantic-exists($key) {
  @return map.has-key(cursor-vars.$cursor-semantic, $key);
}

// -------------------------------------------
// GRADIENT VALIDATION
// -------------------------------------------

/// Check if gradient direction exists
/// @param {String} $key - Direction key to check
/// @return {Boolean} True if key exists
@function gradient-direction-exists($key) {
  @return map.has-key(gradient-vars.$gradient-directions, $key);
}

/// Check if gradient pattern exists
/// @param {String} $key - Pattern key to check
/// @return {Boolean} True if key exists
@function gradient-pattern-exists($key) {
  @return map.has-key(gradient-vars.$gradient-patterns, $key);
}

// -------------------------------------------
// TRANSFORM VALIDATION
// -------------------------------------------

/// Check if transform scale value exists
/// @param {String} $key - Scale key to check
/// @return {Boolean} True if key exists
@function transform-scale-exists($key) {
  @return map.has-key(transform-vars.$transform-scale, $key);
}

/// Check if rotate value exists
/// @param {String} $key - Rotate key to check
/// @return {Boolean} True if key exists
@function rotate-exists($key) {
  @return map.has-key(transform-vars.$rotate-scale, $key);
}

/// Check if translate value exists
/// @param {String} $key - Translate key to check
/// @return {Boolean} True if key exists
@function translate-exists($key) {
  @return map.has-key(transform-vars.$translate-scale, $key);
}

/// Check if skew value exists
/// @param {String} $key - Skew key to check
/// @return {Boolean} True if key exists
@function skew-exists($key) {
  @return map.has-key(transform-vars.$skew-scale, $key);
}

/// Check if transform origin exists
/// @param {String} $key - Origin key to check
/// @return {Boolean} True if key exists
@function transform-origin-exists($key) {
  @return map.has-key(transform-vars.$transform-origins, $key);
}

/// Check if transform preset exists
/// @param {String} $key - Preset key to check
/// @return {Boolean} True if key exists
@function transform-preset-exists($key) {
  @return map.has-key(transform-vars.$transform-presets, $key);
}

/// Check if perspective exists
/// @param {String} $key - Perspective key to check
/// @return {Boolean} True if key exists
@function perspective-exists($key) {
  @return map.has-key(transform-vars.$perspective-scale, $key);
}

// -------------------------------------------
// BREAKPOINT VALIDATION
// -------------------------------------------

/// Check if breakpoint exists
/// @param {String} $key - Breakpoint key to check
/// @return {Boolean} True if key exists
@function breakpoint-exists($key) {
  @return map.has-key(breakpoints-vars.$breakpoints-scale, $key);
}

/// Check if max breakpoint exists
/// @param {String} $key - Breakpoint key to check
/// @return {Boolean} True if key exists
@function breakpoint-max-exists($key) {
  @return map.has-key(breakpoints-vars.$breakpoints-max, $key);
}

// -------------------------------------------
// GRID VALIDATION
// -------------------------------------------

/// Check if grid column count exists
/// @param {String} $key - Grid key to check
/// @return {Boolean} True if key exists
@function grid-columns-exists($key) {
  @return map.has-key(grid-vars.$grid-scale-columns, $key);
}

/// Check if grid gutter exists
/// @param {String} $key - Grid key to check
/// @return {Boolean} True if key exists
@function grid-gutter-exists($key) {
  @return map.has-key(grid-vars.$grid-scale-gutters, $key);
}

// -------------------------------------------
// ASPECT RATIO VALIDATION
// -------------------------------------------

/// Check if aspect ratio exists
/// @param {String} $key - Aspect ratio key to check
/// @return {Boolean} True if key exists
@function aspect-ratio-exists($key) {
  @return map.has-key(aspect-vars.$aspect-ratio-scale, $key);
}

// -------------------------------------------
// UNIVERSAL VARIABLE CHECKER
// -------------------------------------------

/// Universal function to check if any design token variable exists
/// Automatically detects the type and checks the appropriate scale
/// @param {String} $category - Category name
/// @param {String} $key - Key to check
/// @return {Boolean} True if variable exists
/// @example variable-exists('scale', 4) => true
/// @example variable-exists('spacing', 4) => true (legacy)
@function variable-exists($category, $key) {
  // Unified scale
  @if $category == 'scale' or $category == 'spacing' or $category == 'sizing' {
    @return scale-exists($key);
  }
  
  // Typography
  @else if $category == 'font-size' {
    @return font-size-exists($key);
  } @else if $category == 'font-weight' {
    @return font-weight-exists($key);
  } @else if $category == 'line-height' {
    @return line-height-exists($key);
  } @else if $category == 'letter-spacing' {
    @return letter-spacing-exists($key);
  } @else if $category == 'font-family' {
    @return font-family-exists($key);
  }
  
  // Timing
  @else if $category == 'duration' {
    @return duration-exists($key);
  } @else if $category == 'easing' {
    @return easing-exists($key);
  } @else if $category == 'delay' {
    @return delay-exists($key);
  }
  
  // Visual
  @else if $category == 'border-width' {
    @return border-width-exists($key);
  } @else if $category == 'border-style' {
    @return border-style-exists($key);
  } @else if $category == 'radius' {
    @return radius-exists($key);
  } @else if $category == 'shadow' {
    @return shadow-exists($key);
  } @else if $category == 'opacity' {
    @return opacity-exists($key);
  }
  
  // Components
  @else if $category == 'icon-size' {
    @return icon-size-exists($key);
  } @else if $category == 'z-index' {
    @return z-index-exists($key);
  } @else if $category == 'motion-preset' {
    @return motion-preset-exists($key);
  } @else if $category == 'focus' {
    @return focus-exists($key);
  } @else if $category == 'container' {
    @return container-exists($key);
  } @else if $category == 'blur' {
    @return blur-exists($key);
  } @else if $category == 'cursor' {
    @return cursor-exists($key);
  }
  
  // Transforms
  @else if $category == 'transform-scale' {
    @return transform-scale-exists($key);
  } @else if $category == 'rotate' {
    @return rotate-exists($key);
  } @else if $category == 'translate' {
    @return translate-exists($key);
  }
  
  // Layout
  @else if $category == 'breakpoint' {
    @return breakpoint-exists($key);
  } @else if $category == 'aspect-ratio' {
    @return aspect-ratio-exists($key);
  }

  
  @error "Unknown category '#{$category}'. Cannot validate variable existence.";
}