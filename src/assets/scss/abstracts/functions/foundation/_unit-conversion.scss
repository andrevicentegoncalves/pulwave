@use "sass:math";
@use "sass:meta";

// ========================================================================== //
//                        FUNCTIONS: UNIT CONVERSION                          //
// ========================================================================== //

$font-size--base: 16px !default;


// Remove units from a number for calculations
@function strip-unit($value) {
  @if meta.type-of($value) != 'number' {
    @error "strip-unit() expects a number, got #{meta.type-of($value)}";
  }
  
  @if math.is-unitless($value) {
    @return $value;
  }
  
  @return math.div($value, ($value * 0 + 1));
}

//Convert pixels to rem units
@function rem($pixels) {
  @if meta.type-of($pixels) != 'number' {
    @error "rem() expects a number, got #{meta.type-of($pixels)}";
  }
  
  $pixels: strip-unit($pixels);
  @return math.div($pixels, strip-unit($font-size--base)) * 1rem;
}

// Convert pixels to em units with optional context
@function em($pixels, $context: $font-size--base) {
  @if meta.type-of($pixels) != 'number' {
    @error "em() expects a number as first argument, got #{meta.type-of($pixels)}";
  }
  
  @if meta.type-of($context) != 'number' {
    @error "em() expects a number as context, got #{meta.type-of($context)}";
  }
  
  @return math.div(strip-unit($pixels), strip-unit($context)) * 1em;
}