@use 'sass:map';
@use '../../variables/foundation/blur-scale' as scale;

// ============================================================================ //
//                     FUNCTIONS: FOUNDATION - BLUR SCALE                       //
// ============================================================================ //

/// Get blur value from scale
/// @param {String} $size - Blur size (none, xs, s, m, l, xl, 2xl, 3xl)
/// @return {Number} Blur radius value in pixels
/// @example blur('m') => 12px
@function blur($size) {
  @if map.has-key(scale.$blur-scale, $size) {
    @return map.get(scale.$blur-scale, $size);
  }
  @error "Blur size '#{$size}' not found. Available: #{map.keys(scale.$blur-scale)}";
}

/// Get semantic blur value
/// @param {String} $token - Semantic blur token name
/// @return {Number} Blur radius value
/// @example blur-semantic('glass-default') => 12px
@function blur-semantic($token) {
  @if map.has-key(scale.$blur-semantic, $token) {
    @return map.get(scale.$blur-semantic, $token);
  }
  @error "Semantic blur token '#{$token}' not found. Available: #{map.keys(scale.$blur-semantic)}";
}

/// Get glassmorphism preset configuration
/// @param {String} $preset - Preset name
/// @return {Map} Complete glassmorphism configuration
/// @example glassmorphism-preset('glass-light-default')
@function glassmorphism-preset($preset) {
  @if map.has-key(scale.$glassmorphism-presets, $preset) {
    @return map.get(scale.$glassmorphism-presets, $preset);
  }
  @error "Glassmorphism preset '#{$preset}' not found. Available: #{map.keys(scale.$glassmorphism-presets)}";
}

/// Get specific property from glassmorphism preset
/// @param {String} $preset - Preset name
/// @param {String} $property - Property name (blur, background, border, opacity)
/// @return {*} Property value
@function glassmorphism-get($preset, $property) {
  $config: glassmorphism-preset($preset);
  
  @if map.has-key($config, $property) {
    @return map.get($config, $property);
  }
  @error "Property '#{$property}' not found in preset '#{$preset}'";
}

/// Generate backdrop-filter CSS value
/// @param {String|Number} $blur - Blur size name or custom value
/// @return {String} Complete backdrop-filter value
/// @example backdrop-filter('m') => blur(12px)
@function backdrop-filter($blur) {
  $blur-value: null;
  
  // Check if it's a named size from the scale
  @if type-of($blur) == 'string' and map.has-key(scale.$blur-scale, $blur) {
    $blur-value: map.get(scale.$blur-scale, $blur);
  }
  // Check if it's a semantic token
  @else if type-of($blur) == 'string' and map.has-key(scale.$blur-semantic, $blur) {
    $blur-value: map.get(scale.$blur-semantic, $blur);
  }
  // Use custom value directly
  @else {
    $blur-value: $blur;
  }
  
  @return blur($blur-value);
}

/// Get browser fallback color
/// @param {String} $type - Fallback type
/// @return {Color} Fallback color value
@function blur-fallback($type) {
  @if map.has-key(scale.$blur-fallbacks, $type) {
    @return map.get(scale.$blur-fallbacks, $type);
  }
  @error "Blur fallback '#{$type}' not found";
}
