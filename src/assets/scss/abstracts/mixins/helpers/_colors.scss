@use 'sass:color';
@use '../helpers/performance' as performance;

// ========================================================================== //
//                            MIXINS: COLOR HELPERS                           //
// ========================================================================== //
// Reusable styling mixins for components

/// Apply text color from design token
/// @param {String} $token-name - Design token name without -- prefix
/// @example @include text-color('text-default');
@mixin text-color($token-name) {
  color: var(--#{$token-name});
}

/// Apply border color from design token with !important flag
/// @param {String} $token-name - Design token name without -- prefix
/// @param {Boolean} $important - Whether to add !important flag (default: false)
/// @example @include border-color('border-color-default');
/// @example @include border-color('border-color-default', true);
@mixin border-color($token-name, $important: false) {
  @if $important {
    border-color: var(--#{$token-name}) !important;
  } @else {
    border-color: var(--#{$token-name});
  }
}

/// Apply background color with opacity using pseudo-element
/// @param {String} $color-var - CSS custom property name
/// @param {Number} $opacity - Opacity value between 0-1
/// @example @include bg-color-alpha('--background-primary', 0.5);
@mixin bg-color-alpha($color-var, $opacity) {
  & {
    position: relative;
  }
  
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background-color: var(#{$color-var});
    opacity: $opacity;
    z-index: -1;
    @include performance.gpu-accelerate;
  }
}

/// Apply color and background color together
/// @param {String} $text-token - Text color token
/// @param {String} $bg-token - Background color token
/// @example @include color-combo('on-primary', 'primary');
@mixin color-combo($text-token, $bg-token) {
  color: var(--#{$text-token});
  background-color: var(--#{$bg-token});
}

/// Apply hover state color
/// @param {String} $token-name - Design token name for hover state
/// @example @include hover-color('primary-hover');
@mixin hover-color($token-name) {
  &:hover {
    color: var(--#{$token-name});
  }
}

/// Apply hover state background color
/// @param {String} $token-name - Design token name for hover state
/// @example @include hover-background('background-primary-hover');
@mixin hover-background($token-name) {
  &:hover {
    background-color: var(--#{$token-name});
  }
}

/// Apply focus state styles
/// @param {String} $ring-token - Focus ring token name
/// @example @include focus-ring('focus-ring');
@mixin focus-ring($ring-token: 'focus-ring') {
  &:focus,
  &:focus-visible {
    outline: 2px solid var(--#{$ring-token});
    outline-offset: 2px;
  }
}

/// Apply disabled state colors
/// @param {String} $text-token - Text color token for disabled state
/// @param {String} $bg-token - Background color token for disabled state
/// @example @include disabled-state('text-disabled', 'background-disabled');
@mixin disabled-state($text-token: 'text-disabled', $bg-token: 'background-disabled') {
  &:disabled,
  &[aria-disabled="true"],
  &.disabled {
    color: var(--#{$text-token});
    background-color: var(--#{$bg-token});
    cursor: not-allowed;
    pointer-events: none;
  }
}

/// Apply link color states
/// @param {String} $default - Default link color token
/// @param {String} $hover - Hover link color token
/// @param {String} $visited - Visited link color token (optional)
/// @example @include link-colors('link-default', 'link-hover', 'link-visited');
@mixin link-colors($default: 'link-default', $hover: 'link-hover', $visited: null) {
  color: var(--#{$default});
  text-decoration: underline;
  
  &:hover {
    color: var(--#{$hover});
  }
  
  @if $visited {
    &:visited {
      color: var(--#{$visited});
    }
  }
}

/// Apply gradient background
/// @param {String} $start-token - Start color token
/// @param {String} $end-token - End color token
/// @param {String} $direction - Gradient direction (default: to bottom)
/// @example @include gradient-background('primary', 'secondary', 'to right');
@mixin gradient-background($start-token, $end-token, $direction: 'to bottom') {
  background: linear-gradient(#{$direction}, var(--#{$start-token}), var(--#{$end-token}));
}